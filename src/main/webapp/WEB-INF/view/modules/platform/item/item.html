<!-- 
 * Generated by Blade.
 * 2017-08-05 17:50:15
 -->
@layout("/common/_container.html"){

<script type="text/javascript">
    var grid_selector = "#grid-table";
    var pager_selector = "#grid-pager";

    $(function () {
        initGrid();
        initMenuBtn("btns", "${code}");
    });

    function initGrid() {
        var grid_url = "${ctxPath}/${code}/list";
        var _colnames = ["id",
            "md5",
            "中类",
            "平台",
            "物料池",
            "物料价格",
            "动作",
            "请求id",
            "物料打分",
            "小类",
            "标签",
            "url",
            "vender",
            "创建人",
            "部门ID",
            "角色ID",
            "更新人",
            "版本号",
            "bid",
            "大类",
            "城市",
            "国家",
            "请求类型",
            "描述",
            "物料过期时间",
            "是否免费",
            "物料id",
            "物料生成时间",
            "扩展1",
            "扩展2",
            "扩展3",
            "纬度",
            "经度",
            "创建时间",
            "更新时间"];
        var _colmodel = [{name: "id", index: "id", width: 100},
            {name: "md5", index: "md5", width: 100},
            {name: "middleType", index: "middleType", width: 100},
            {name: "platform", index: "platform", width: 100},
            {name: "poolId", index: "poolId", width: 100},
            {name: "price", index: "price", width: 100},
            {name: "publish", index: "publish", width: 100},
            {name: "requestId", index: "requestId", width: 100},
            {name: "score", index: "score", width: 100},
            {name: "smallType", index: "smallType", width: 100},
            {name: "tags", index: "tags", width: 100},
            {name: "url", index: "url", width: 100},
            {name: "vender", index: "vender", width: 100},
            {name: "createdBy", index: "createdBy", width: 100},
            {name: "sDeptId", index: "sDeptId", width: 100},
            {name: "sRoleId", index: "sRoleId", width: 100},
            {name: "updatedBy", index: "updatedBy", width: 100},
            {name: "version", index: "version", width: 100},
            {name: "bid", index: "bid", width: 100},
            {name: "bigType", index: "bigType", width: 100},
            {name: "city", index: "city", width: 100},
            {name: "country", index: "country", width: 100},
            {name: "dataType", index: "dataType", width: 100},
            {name: "describe", index: "describe", width: 100},
            {name: "expireTime", index: "expireTime", width: 100},
            {name: "free", index: "free", width: 100},
            {name: "itemId", index: "itemId", width: 100},
            {name: "itemTime", index: "itemTime", width: 100},
            {name: "key1", index: "key1", width: 100},
            {name: "key2", index: "key2", width: 100},
            {name: "key3", index: "key3", width: 100},
            {name: "latitude", index: "latitude", width: 100},
            {name: "longitude", index: "longitude", width: 100},
            {name: "created", index: "created", width: 100},
            {name: "lastUpd", index: "lastUpd", width: 100}];

        jQuery(grid_selector).jqGrid({
            url: grid_url,
            shrinkToFit: false,
            colNames: _colnames,
            colModel: _colmodel,
            jsonReader: {id: "id"},
            pager: pager_selector,
            postData: {sort: "id", order: "desc"}
        });
    }
    function btnCallBack(btn) {
        if (btn.id == "item_upload") {
            var ids = getGridXls().join(",");
            var rows = getGridXls().length;
            if (rows == 0) {
                layer_alert("请选择一条数据!", "warn");
                return;
            }
            layer.confirm("是否确定上报物料数据？", {
                icon: 3,
                btn: ['确定', '取消'] //按钮
            }, function () {
                $.post("${ctxPath}/item/upload", {ids: ids}, function (data) {
                    if (data.code === 0) {
                        layer_alert(data.message, "success");
                    } else {
                        layer_post(data);
                    }
                }, "json");

            }, function () {
                //layer.msg('已取消');
            });
            return;
        }
    }
</script>


<!-- 配置 grid -->
<div class="row">
    <div class="col-xs-12 tb-grid">
        <!-- 配置 查询 -->
        @ var _col=[
        @ {name:"物料id", index:"itemId", type:"text"},
        @ {name:"描述", index:"describe", type:"text"},
        @ {name:"物料过期时间", index:"expireTime", type:"text"},
        @ {name:"是否免费", index:"free", type:"text"},
        @ {name:"物料生成时间", index:"itemTime", type:"text"},
        @ {name:"大类", index:"bigType", type:"text"},
        @ {name:"纬度", index:"latitude", type:"text"},
        @ {name:"经度", index:"longitude", type:"text"},
        @ {name:"md5", index:"md5", type:"text"},
        @ {name:"中类", index:"middleType", type:"text"},
        @ {name:"平台", index:"platform", type:"text"},
        @ {name:"物料池", index:"poolId", type:"text"},
        @ {name:"物料价格", index:"price", type:"text"},
        @ {name:"动作", index:"publish", type:"text"},
        @ {name:"请求id", index:"requestId", type:"text"},
        @ {name:"物料打分", index:"score", type:"text"},
        @ {name:"小类", index:"smallType", type:"text"},
        @ {name:"标签", index:"tags", type:"text"},
        @ {name:"url", index:"url", type:"text"},
        @ {name:"vender", index:"vender", type:"text"},
        @ {name:"城市", index:"city", type:"text"},
        @ {name:"国家", index:"country", type:"text"},
        @ {name:"请求类型", index:"dataType", type:"text"},
        @ {name:"创建人", index:"createdBy", type:"text"},
        @ {name:"部门ID", index:"sDeptId", type:"text"},
        @ {name:"角色ID", index:"sRoleId", type:"text"},
        @ {name:"更新人", index:"updatedBy", type:"text"},
        @ {name:"版本号", index:"version", type:"text"},
        @ {name:"bid", index:"bid", type:"text"},
        @ {name:"id", index:"id", type:"text"},
        @ {name:"扩展1", index:"key1", type:"text"},
        @ {name:"扩展2", index:"key2", type:"text"},
        @ {name:"扩展3", index:"key3", type:"text"},
        @ {name:"创建时间", index:"created", type:"text"},
        @ {name:"更新时间", index:"lastUpd", type:"text"}
        @];
        @ include("/common/_function/_search.html",{"col":_col}){}
        <!-- 按钮 -->
        <div class="welljq well-sm" id="btns"></div>
        <!-- grid -->
        <table id="grid-table"></table>
        <!-- 分页-->
        <div id="grid-pager"></div>
    </div>
</div>

<!-- 引入所需的js -->
@include("/common/_listscript.html", {isExport : true}) {}

@}	